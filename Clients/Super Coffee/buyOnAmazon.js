var creamerJSON = [
    {
        'name': 'Original',
        'id': '4448172900403',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B07RJTSWPB/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    },
    {
        'name': 'Vanilla',
        'id': '4448172867635',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B07RFNT4CV/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    },
    {
        'name': 'French Vanilla',
        'id': '4569473810483',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B08QV8F24C/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    },
    {
        'name': 'Coconut Mocha',
        'id': '4732626599987',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B09FV873MW/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    },
    {
        'name': 'Toasted Hazelnut',
        'id': '6568636579891',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B09DM67JT3/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    },
    {
        'name': 'Caramel',
        'id': '4545131806771',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B08DRP6RFN/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    },
    {
        'name': 'Plant Based Variety Pack',
        'id': '6588752920627',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B09FV873MW/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    },
    {
        'name': 'Variety Pack',
        'id': '6588750495795',
        'link': 'https://www.amazon.com/Creamer-SugarFree-Coffee-Protein-Calories/dp/B09FV873MW/ref=pd_bxgy_sccl_1/131-2529275-8254504?pd_rd_w=bRgZQ&content-id=amzn1.sym.7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_p=7757a8b5-874e-4a67-9d85-54ed32f01737&pf_rd_r=SF5TPBCTZHXMEZBYJBH6&pd_rd_wg=BZaq0&pd_rd_r=62a47472-45e3-4373-9ee9-79f6dbcdf82d&pd_rd_i=B084ZX6WFL&th=1'
    }
]

var buyOnAmazonInterval = setInterval(function () {
    document.querySelectorAll('.add-to-cart-form:not(.hideForm)').forEach(function (form) {
        var productId = form.getAttribute('data-product-id')
        creamerJSON.forEach(function (item) {
            var oneTime = form.querySelector('[data-type="one-time"] > p')
            if (item.id == productId && oneTime) {
                // form.classList.add('hideForm')
                oneTime.click()
                // var buyOnAmazonButton = document.createElement('a')
                // buyOnAmazonButton.className = "btn buyOnAmazonButton"
                // buyOnAmazonButton.innerText = "Buy On Amazon"
                // buyOnAmazonButton.href = item.link
                // buyOnAmazonButton.target = "_blank"
                // form.parentElement.insertBefore(buyOnAmazonButton, form)
                // buyOnAmazonButton.addEventListener('click', function () {
                //     var tracker = ga.getAll().find(tracker => tracker.model.data.ea[':trackingId'] == 'UA-112383587-4') // insert their UA number here
                //     if (tracker) {
                //         tracker.send('event', 'global', 'buy on amazon click - ' + item.name, window.location.href) // replace event category and event action
                //     }
                // })
            }


        })
    })

    document.querySelectorAll('.product-card.creamer').forEach(function (card) {
        var form = card.querySelector('.discount-context')
        var price = card.querySelector('p.price')
        var html = '$19.<sup>99</sup>'
        if (form && price.innerHTML != html) {
            var productId = card.getAttribute('data-product-id')
            creamerJSON.forEach(function (item) {
                if (item.id == productId) {
                    form.classList.add('hideForm')
                    card.querySelector('p.price').innerHTML = html

                }
            })
        }
    })

    // var pdpAtcBar = document.querySelector('#pdp-atc-bar')
    // if (!pdpAtcBar || pdpAtcBar.querySelector('.hideForm')) {
    //     return
    // }

    // creamerJSON.forEach(function (item) {
    //     if (pdpAtcBar.querySelector('.price-diff').className.indexOf(item.id) !== -1) {
    //         var form = pdpAtcBar.querySelector('.add-to-cart')
    //         form.classList.add('hideForm')
    //         var buyOnAmazonButton = document.createElement('a')
    //         buyOnAmazonButton.className = "btn buyOnAmazonButton"
    //         buyOnAmazonButton.innerText = "Buy On Amazon"
    //         buyOnAmazonButton.href = item.link
    //         buyOnAmazonButton.target = "_blank"
    //         form.parentElement.insertBefore(buyOnAmazonButton, form)
    //         buyOnAmazonButton.addEventListener('click', function () {
    //             var tracker = ga.getAll().find(tracker => tracker.model.data.ea[':trackingId'] == 'UA-112383587-4') // insert their UA number here
    //             if (tracker) {
    //                 tracker.send('event', 'global', 'buy on amazon click - ' + item.name, window.location.href) // replace event category and event action
    //             }
    //         })
    //     }
    // })

}, 500)